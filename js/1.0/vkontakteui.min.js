/*
 * VKontakte UI Framework, version 1.0
 * Last update: 11.04.2011
 *
 * Author: Konstantin Babushkin
 */

typeof VK=="undefined"&&(VK={});VK._ui={box:{},size:{},drop:{},check:{},radio:{},date:{}}; VK.box=function(b,d,f,c,e,g,j){if(b&&typeof d=="boolean"&&VK._ui.box[b])d===!0?VK._ui.box[b].show():VK._ui.box[b].hide();else{VK._ui.box[b]=(new MessageBox({title:d,width:f})).removeButtons();for(i=0;i<e.length;i++)VK._ui.box[b].addButton({style:"button_"+e[i].style.toString(),label:e[i].label,onClick:e[i].onClick});if(typeof g=="object")for(var h in g)VK._ui.boxOptions={},VK._ui.boxOptions[h]=g[h],VK._ui.box[b].setOptions(VK._ui.boxOptions);if(typeof c=="object"||typeof c=="array"){VK._ui.box["c_"+ b]=c[0]+(c[1]?"?":"");if(c[1])for(h in c[1])VK._ui.box["c_"+b]+=h+"="+c[1][h]+"&";VK._ui.box[b].loadContent(VK._ui.box["c_"+b].slice(0,-1),0,!0)}else typeof c=="string"&&VK._ui.box[b].content(c);VK._ui.box[b].show();typeof g.callback=="function"&&(VK._ui.box["i_"+b]=setInterval(function(){geByClass("message_box")[0]&&(clearInterval(VK._ui.box["i_"+b]),g.callback())},200));j&&(VK.addCallback("onScrollTop",function(b){geByClass("message_box")[0].style.top=(b>150?b:150)+"px"}),VK.callMethod("scrollTop"))}}; VK.size=function(b,d,f){if(d)ge(b).style.width=d;VK._ui.size[b]=new Autosize(ge(b),f)};VK.drop=function(b,d,f,c){c||(c={});c.width=d;VK._ui.drop[b]=new Dropdown(ge(b),f,c)};VK.auto=function(b,d,f,c){c||(c={});extend(c,{autocomplete:!0,width:d});VK._ui.drop[b]=new Autocomplete(ge(b),f,c)}; VK.check=function(b,d,f,c,e,g){if((VK._ui.check[b]||typeof b=="object"||typeof b=="array")&&typeof d=="boolean")if(typeof b=="object"||typeof b=="array")for(a=0;a<b.length;a++)VK.check(b[a],d);else for(i=0;i<geByClass("checkbox_container").length;i++){if(VK._ui.check["l_"+b]=geByClass("checkbox_container")[i],VK._ui.check["l_"+b].innerHTML.match(/id=('|"|)(.[^"']*)('|"|\s)/)[2]===b)VK._ui.check["l_"+b].style.display=d==!0?"block":"none"}else{if(c)ge(b).value=1;e||(e={});e.label=d;e.width=f;VK._ui.check[b]= new Checkbox(ge(b),e);typeof g=="boolean"&&VK.check(b,g)}}; VK.radio=function(b,d,f,c,e,g){if(b&&typeof d==="undefined")return each(geByClass("radiobtn_container"),function(c,d){if(geByClass("radiobtn_on",d).length)return VK._ui.radio["ch_"+b]=[d.getElementsByTagName("input")[0].value,d.getElementsByTagName("input")[0].id],!1}),VK._ui.radio["ch_"+b];else if((VK._ui.radio[b]||typeof b=="object"||typeof b=="array")&&typeof d=="boolean")if(typeof b=="object"||typeof b=="array")for(a=0;a<b.length;a++)VK.radio(b[a],d);else for(i=0;i<geByClass("radiobtn_container").length;i++){if(VK._ui.radio["l_"+ b]=geByClass("radiobtn_container")[i],VK._ui.radio["l_"+b].innerHTML.match(/id=('|"|)(.[^"']*)('|"|\s)/)[2]===b)VK._ui.radio["l_"+b].style.display=d==!0?"block":"none"}else d==="select"&&ge(b).name&&ge(b).value?Radiobutton.select(ge(b).name,ge(b).value):(e||(e={}),e.label=d,e.width=f,VK._ui.radio[b]=new Radiobutton(ge(b),e),c&&ge(b).name&&ge(b).value&&Radiobutton.select(ge(b).name,ge(b).value),typeof g=="boolean"&&VK.radio(b,g))}; VK.date=function(b,d,f,c){ge(b).value=f?f:Math.round((new Date).getTime()/1E3);c||(c={});c.width=d;VK._ui.date[b]=new Datepicker(b,c)};